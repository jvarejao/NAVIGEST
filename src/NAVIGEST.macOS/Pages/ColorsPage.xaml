<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:behaviors="clr-namespace:NAVIGEST.macOS.Behaviors"
             x:Class="NAVIGEST.macOS.Pages.ColorsPage"
             x:DataType="{x:Null}"
             Title="Cores"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <Grid>
        <Grid RowDefinitions="Auto, *"
              Padding="24,24,24,0"
              RowSpacing="16"
              MaximumWidthRequest="1200"
              HorizontalOptions="Center">

            <Grid ColumnDefinitions="*, Auto" ColumnSpacing="16">
                <Label Text="GestÃ£o de Cores"
                       FontSize="28"
                       FontAttributes="Bold"
                       VerticalOptions="Center"
                       TextColor="{DynamicResource BodyTextColor}" />

                <Button Grid.Column="1"
                        Text="Nova Cor"
                        Command="{Binding AddColorCommand}"
                        BackgroundColor="#0A84FF"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="12"
                        HeightRequest="44"
                        VerticalOptions="Center"
                        Padding="20,0">
                    <Button.Behaviors>
                        <behaviors:ButtonMicroAnimationsBehavior />
                    </Button.Behaviors>
                </Button>
            </Grid>

            <CollectionView Grid.Row="1"
                            ItemsSource="{Binding Colors}"
                            SelectionMode="None"
                            Margin="0,0,0,20">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical" ItemSpacing="12" />
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border StrokeThickness="0"
                                BackgroundColor="{DynamicResource CardBackgroundColor}"
                                StrokeShape="RoundRectangle 12"
                                Padding="16">
                            <Grid ColumnDefinitions="*, Auto, Auto" ColumnSpacing="16">
                                <HorizontalStackLayout Grid.Column="0" Spacing="10" VerticalOptions="Center">
                                    <BoxView Color="{Binding MauiColor}"
                                             WidthRequest="14" HeightRequest="14" CornerRadius="7"
                                             VerticalOptions="Center" />
                                    <VerticalStackLayout Spacing="2" VerticalOptions="Center">
                                        <Label Text="{Binding NomeCor}"
                                               FontSize="16"
                                               FontAttributes="Bold"
                                                 TextTransform="Uppercase"
                                               TextColor="{DynamicResource BodyTextColor}" />
                                        <Label Text="{Binding IdCor}"
                                               FontSize="12"
                                               TextColor="Gray" />
                                        <Label Text="{Binding CodigoHex}"
                                               FontSize="12"
                                               TextColor="Gray"
                                                 IsVisible="{Binding CodigoHex, Converter={StaticResource IsNotNullOrEmptyConverter}}" />
                                             <Label Text="{Binding Referencia}"
                                                 FontSize="12"
                                                 TextColor="Gray"
                                                 IsVisible="{Binding Referencia, Converter={StaticResource IsNotNullOrEmptyConverter}}" />
                                    </VerticalStackLayout>
                                </HorizontalStackLayout>

                                <HorizontalStackLayout Grid.Column="2" Spacing="8" VerticalOptions="Center">
                                    <Button Text="&#xF044;" FontFamily="FA7Solid"
                                            BackgroundColor="#190A84FF" TextColor="#0A84FF"
                                            FontSize="16"
                                            CornerRadius="8"
                                            Padding="0"
                                            WidthRequest="40" HeightRequest="40"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.EditColorCommand}"
                                            CommandParameter="{Binding .}">
                                        <Button.Behaviors>
                                            <behaviors:ButtonMicroAnimationsBehavior />
                                        </Button.Behaviors>
                                    </Button>

                                    <Button Text="&#xF1F8;" FontFamily="FA7Solid"
                                            BackgroundColor="#19FF3B30" TextColor="#FF3B30"
                                            FontSize="16"
                                            CornerRadius="8"
                                            Padding="0"
                                            WidthRequest="40" HeightRequest="40"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.DeleteColorCommand}"
                                            CommandParameter="{Binding .}">
                                        <Button.Behaviors>
                                            <behaviors:ButtonMicroAnimationsBehavior />
                                        </Button.Behaviors>
                                    </Button>
                                </HorizontalStackLayout>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
                <CollectionView.EmptyView>
                    <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                        <Label Text="&#xF05A;" FontFamily="FA7Solid" FontSize="40" TextColor="Gray" HorizontalOptions="Center" />
                        <Label Text="Nenhuma cor encontrada." TextColor="Gray" HorizontalOptions="Center" />
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
            </CollectionView>
        </Grid>
    </Grid>
</ContentPage>
