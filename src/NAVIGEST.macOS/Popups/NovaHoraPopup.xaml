<?xml version="1.0" encoding="utf-8"?>
<toolkit:Popup x:Class="NAVIGEST.macOS.Popups.NovaHoraPopup"
               xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               xmlns:models="clr-namespace:NAVIGEST.macOS.Models"
               xmlns:res="clr-namespace:NAVIGEST.Shared.Resources.Strings;assembly=NAVIGEST.Shared"
               CanBeDismissedByTappingOutsideOfPopup="False">
  <toolkit:Popup.Size>
    <Size Width="400" Height="680" />
  </toolkit:Popup.Size>

  <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1C1C1E}"
          StrokeThickness="0"
          Padding="24"
          StrokeShape="RoundRectangle 18">
    <Border.Shadow>
      <Shadow Brush="Black" Opacity="0.25" Radius="12" Offset="0,4"/>
    </Border.Shadow>
    
    <Grid RowDefinitions="Auto,*,Auto" RowSpacing="20">
      <!-- TÃ­tulo e BotÃ£o Eliminar -->
      <Grid Grid.Row="0" ColumnDefinitions="*,Auto">
          <Label Text="{x:Static res:AppResources.Hours_NewTitle}"
                 x:Name="TituloLabel"
                 FontSize="18"
                 FontAttributes="Bold"
                 VerticalOptions="Center"
                 TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
          
          <Button x:Name="EliminarButton"
                  Grid.Column="1"
                  Text="ðŸ—‘ï¸"
                  BackgroundColor="Transparent"
                  TextColor="#FF3B30"
                  FontSize="20"
                  Clicked="OnEliminarClicked"
                  IsVisible="False"/>
      </Grid>

      <!-- FormulÃ¡rio -->
      <ScrollView Grid.Row="1">
        <VerticalStackLayout Spacing="16">
          <!-- Tipo de Registo -->
          <Grid RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Hours_RecordType}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
                <Grid ColumnDefinitions="*,Auto">
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnSelecionarTipoRegistoTapped"/>
                    </Grid.GestureRecognizers>
                    <Label x:Name="TipoRegistoLabel"
                           Text="{x:Static res:AppResources.Hours_Work}"
                           Padding="12,10"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                    <Label Grid.Column="1"
                           Text="â–¼"
                           FontSize="12"
                           Padding="12,10"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                </Grid>
            </Border>
          </Grid>

          <!-- Motivo AusÃªncia -->
          <Grid x:Name="AbsenceReasonContainer" RowDefinitions="Auto,Auto" RowSpacing="6" IsVisible="False">
            <Label Text="{x:Static res:AppResources.Hours_Reason}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
                <Grid ColumnDefinitions="Auto,*,Auto">
                    <Grid.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnSelecionarMotivoAusenciaTapped"/>
                    </Grid.GestureRecognizers>
                    <Label x:Name="AbsenceIconLabel"
                           Text=""
                           FontFamily="FA7Solid"
                           Padding="12,10,0,10"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                    <Label Grid.Column="1"
                           x:Name="AbsenceReasonLabel"
                           Text="{x:Static res:AppResources.Hours_SelectReason}"
                           Padding="5,10,12,10"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                    <Label Grid.Column="2"
                           Text="â–¼"
                           FontSize="12"
                           Padding="12,10"
                           VerticalOptions="Center"
                           TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                </Grid>
            </Border>
          </Grid>

          <!-- Colaborador -->
          <Grid RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Common_Collaborator}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
              <Grid ColumnDefinitions="*,Auto">
                <Label x:Name="ColaboradorLabel"
                       Text="{x:Static res:AppResources.Hours_SelectCollaborator}"
                       Padding="12,10"
                       VerticalOptions="Center"
                       TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                <Button Grid.Column="1"
                        Text="ðŸ”"
                        FontSize="20"
                        BackgroundColor="Transparent"
                        TextColor="{AppThemeBinding Light=#0A84FF, Dark=#0A84FF}"
                        Clicked="OnSelecionarColaboradorClicked"
                        WidthRequest="50"/>
              </Grid>
            </Border>
          </Grid>

          <!-- Cliente -->
          <Grid x:Name="ClienteContainer" RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Hours_Client}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
              <Grid ColumnDefinitions="*,Auto">
                <Label x:Name="ClienteLabel"
                       Text="{x:Static res:AppResources.Hours_SelectClient}"
                       Padding="12,10"
                       VerticalOptions="Center"
                       TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
                <Button Grid.Column="1"
                        Text="ðŸ”"
                        FontSize="20"
                        BackgroundColor="Transparent"
                        TextColor="{AppThemeBinding Light=#0A84FF, Dark=#0A84FF}"
                        Clicked="OnSelecionarClienteClicked"
                        WidthRequest="50"/>
              </Grid>
            </Border>
          </Grid>

          <!-- Data -->
          <Grid RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Hours_Date}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
              <DatePicker x:Name="DataPicker"
                          Format="dd/MM/yyyy"
                          TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                          BackgroundColor="Transparent"/>
            </Border>
          </Grid>

          <!-- Horas Normais -->
          <Grid x:Name="HorasNormaisContainer" RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Hours_NormalHours}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
              <Entry x:Name="HorasEntry"
                     Keyboard="Numeric"
                     Placeholder="0.0"
                     TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                     BackgroundColor="Transparent"/>
            </Border>
          </Grid>

          <!-- Horas Extras -->
          <Grid x:Name="HorasExtrasContainer" RowDefinitions="Auto,Auto" RowSpacing="6">
            <Label Text="{x:Static res:AppResources.Hours_ExtraHours}"
                   FontSize="14"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"/>
            <Border Grid.Row="1"
                    BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8">
              <Entry x:Name="HorasExtrasEntry"
                     Keyboard="Numeric"
                     Placeholder="0.0"
                     TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                     BackgroundColor="Transparent"/>
            </Border>
          </Grid>
        </VerticalStackLayout>
      </ScrollView>

      <!-- BotÃµes -->
      <Grid Grid.Row="2" ColumnDefinitions="*,*" ColumnSpacing="12">
        <Button Text="{x:Static res:AppResources.Common_Cancel}"
                BackgroundColor="{AppThemeBinding Light=#F2F2F7, Dark=#2C2C2E}"
                TextColor="{AppThemeBinding Light=#000000, Dark=#FFFFFF}"
                Clicked="OnCancelarClicked"/>
        
        <Button Text="{x:Static res:AppResources.Common_Save}"
                BackgroundColor="{AppThemeBinding Light=#0A84FF, Dark=#0A84FF}"
                TextColor="White"
                FontAttributes="Bold"
                Clicked="OnGuardarClicked"
                Grid.Column="1"/>
      </Grid>
    </Grid>
  </Border>
</toolkit:Popup>