<?xml version="1.0" encoding="utf-8" ?>
<toolkit:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
               xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
               xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
               x:Class="NAVIGEST.macOS.Popups.StatusPickerPopup"
               Color="Transparent"
               CanBeDismissedByTappingOutsideOfPopup="True">

    <Border StrokeShape="RoundRectangle 18" 
            BackgroundColor="{DynamicResource PageBackgroundColor}"
            WidthRequest="500"
            HeightRequest="600"
            Padding="20">
        <Border.Shadow>
            <Shadow Brush="Black" Offset="0,5" Radius="15" Opacity="0.2"/>
        </Border.Shadow>
        
        <Grid RowDefinitions="Auto, *">
            <!-- Header -->
            <Grid ColumnDefinitions="*, Auto" Margin="0,0,0,10">
                <Label Text="Selecionar Estado" FontSize="18" FontAttributes="Bold" VerticalOptions="Center"/>
                <Button Grid.Column="1" 
                        Text="âœ•" 
                        Clicked="OnCloseClicked"
                        BackgroundColor="Transparent"
                        TextColor="#0A84FF"
                        FontSize="18"
                        WidthRequest="40"
                        HeightRequest="40"/>
            </Grid>
            
            <!-- List -->
            <CollectionView Grid.Row="1" 
                            x:Name="StatusList" 
                            SelectionMode="Single"
                            SelectionChanged="OnSelectionChanged">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border StrokeThickness="0" Padding="15" Margin="0,2" BackgroundColor="{DynamicResource CardBackgroundColor}" StrokeShape="RoundRectangle 8">
                            <Label Text="{Binding .}" FontAttributes="Bold" TextColor="{DynamicResource BodyTextColor}" VerticalOptions="Center"/>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Grid>
    </Border>
</toolkit:Popup>